# AI Agent 使用說明與成本預估 (混合模式)

## 總覽

為了達到最佳的成本效益比，本專案採用 **混合模型策略 (Hybrid Model Strategy)**。

- **核心邏輯 (Core Logic)**：使用 **Gemini 3 Pro**，確保複雜推理、計畫生成與數據分析的準確度。
- **一般互動 (General Interaction)**：使用 **Gemini 3 Flash**，處理日常對話、潤色與簡單查詢，享受極致速度與低成本。

---

## AI 互動功能詳解

### 1. AI 教練週報 (核心邏輯) - _重點功能_

- **功能名稱**: AI 教練週報 (Weekly AI Coach)
- **對應函式**: `analyzePerformance`
- **資料來源**:
  - **任務數據**: 完成數量、完成率。
  - **專注數據**: 總專注時間、各類別分佈、番茄鐘完成數。
- **核心能力**:
  - **本週表現分析**: 生成條理分明的文字摘要，並使用 `<數字>` 與 `<類別>` 標籤進行視覺化強調。
  - **下週建議策略**: 根據數據提供具體的改進建議（例如：「增加數學科目的專注時間」）。
  - **歷史存檔**: 自動保存每週分析結果供隨時回顧。
- **互動方式**: 使用者點擊「生成最新週報」，AI 進行深度分析並回傳結果。
- **模型選用**: **Gemini 3 Pro** (需具備深度推理與總結能力)。

### 2. 讀書計畫與任務生成 (核心邏輯)

- **功能**: `generateStudyPlan` / `generateTaskTypes`
- **互動**: 從大目標生成可執行的任務清單，或根據使用者身分建議任務分類。
- **模型選用**: **Gemini 3 Pro** (需理解複雜目標並拆解)。

### 3. 互動式助理 (一般互動)

- **功能**: `chatWithAssistant`
- **互動**: 提供生產力建議和任務建議的對話介面，並維持對話歷史脈絡。
- **模型選用**: **Gemini 3 Flash** (追求快速回應)。

### 4. 智慧課表解析 (影像輸入) - _低頻率使用_

- **功能**: `extractScheduleFromImage`
- **互動**: 解析課表圖片並輸出 JSON。
- **模型選用**: **Gemini 3 Flash** (具備優秀的視覺辨識能力且成本低)。

---

## 模型分配與定價

| 模型               | 適用場景                                         | 輸入價格 (每百萬 Tokens) | 輸出價格 (每百萬 Tokens) |
| :----------------- | :----------------------------------------------- | :----------------------- | :----------------------- |
| **Gemini 3 Pro**   | **核心邏輯**：AI 教練週報、讀書計畫生成。        | **$2.00**                | **$12.00**               |
| **Gemini 3 Flash** | **一般互動**：日常聊天助理、文字潤色、圖片解析。 | **$0.50**                | **$3.00**                |

---

## 預估每月用量與成本 (混合策略)

假設每月總互動次數為 300 次 (約每天 10 次)，並依據功能重要性進行分配。

### 1. 核心邏輯 (Pro) - 每天約 3 次

- **場景**: **AI 教練週報 (每週)**、生成新讀書計畫、深度分析。
- **數量**: 100 次/月
- **Pro 成本**:
  - 輸入: 0.1M \* $2.00 = $0.20
  - 輸出: 0.05M \* $12.00 = $0.60
  - **小計: $0.80 / 月**

### 2. 一般互動 (Flash) - 每天約 7 次

- **場景**: 一般聊天 (Chat)、任務標題潤色 (Polish)、快速問答。
- **數量**: 200 次/月
- **Flash 成本**:
  - 輸入: 0.2M \* $0.50 = $0.10
  - 輸出: 0.1M \* $3.00 = $0.30
  - **小計: $0.40 / 月**

---

## 每月總預估成本

| 項目                 | 預估費用 (美金) | 備註               |
| :------------------- | :-------------- | :----------------- |
| **核心邏輯 (Pro)**   | **$0.80**       | AI 週報與深度計畫  |
| **一般互動 (Flash)** | **$0.40**       | 日常對話與潤色     |
| **總計**             | **$1.20**       | **約合台幣 38 元** |

### 比較

- 純 Flash 方案: ~$0.60 / 月
- 純 Pro 方案: ~$2.40 / 月
- **混合方案: ~$1.20 / 月** (在效能與成本間取得最佳平衡)

## 總結

透過將「AI 教練週報」等核心邏輯交給 **Gemini 3 Pro** 處理，我們能確保使用者獲得最精準的分析與建議；而日常的高頻互動則由 **Gemini 3 Flash** 負責。這種混合策略將每月成本控制在 **$1.20 美元** 左右，既能維持教練級的 AI 表現，又極具經濟效益。
